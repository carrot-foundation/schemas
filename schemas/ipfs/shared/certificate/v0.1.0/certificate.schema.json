{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/schemas/ipfs/shared/certificate/v0.1.0/certificate.schema.json",
  "title": "Carrot Certificate Definitions",
  "description": "Reusable certificate definitions for Carrot IPFS JSON schemas.",
  "type": "object",
  "$defs": {
    "waste_classification": {
      "type": "object",
      "required": ["primary_type", "subtype", "net_weight_kg"],
      "title": "Waste Classification",
      "description": "Classification of the source waste (MassID)",
      "properties": {
        "primary_type": {
          "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/waste_type",
          "title": "Source Waste Primary Type",
          "description": "Primary type of the source waste"
        },
        "subtype": {
          "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/waste_subtype",
          "title": "Source Waste Subtype",
          "description": "Subtype of the source waste"
        },
        "net_weight_kg": {
          "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/weight_kg",
          "title": "Source Waste Net Weight",
          "description": "Net weight of the source waste"
        }
      },
      "additionalProperties": false
    },
    "accredited_participants": {
      "type": "array",
      "minItems": 1,
      "title": "Accredited Participants",
      "items": {
        "type": "object",
        "required": [
          "participant_id",
          "name",
          "role",
          "external_url",
          "accreditation_id"
        ],
        "properties": {
          "participant_id": {
            "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/uuid",
            "title": "Participant ID"
          },
          "name": {
            "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/participant_name"
          },
          "role": {
            "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/participant_role"
          },
          "accreditation_id": {
            "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/uuid",
            "title": "Accreditation ID"
          },
          "external_url": {
            "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/external_url",
            "title": "Participant Accreditation External URL"
          }
        },
        "additionalProperties": false
      }
    },
    "participant_rewards": {
      "type": "object",
      "required": ["distribution_basis", "reward_allocations"],
      "title": "Participant Rewards",
      "description": "Rewards distribution to participants",
      "properties": {
        "distribution_basis": {
          "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
          "maxLength": 200,
          "title": "Distribution Basis",
          "description": "Basis for the rewards distribution"
        },
        "reward_allocations": {
          "type": "array",
          "minItems": 1,
          "title": "Reward Allocations",
          "description": "Rewards percentage allocated to each participant",
          "items": {
            "type": "object",
            "required": [
              "participant_id",
              "participant_name",
              "role",
              "reward_percentage",
              "effective_percentage"
            ],
            "properties": {
              "participant_id": {
                "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/uuid",
                "title": "Participant ID"
              },
              "participant_name": {
                "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/participant_name"
              },
              "role": {
                "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/participant_role"
              },
              "reward_percentage": {
                "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/percentage",
                "title": "Reward Percentage",
                "description": "Reward percentage allocated to the participant"
              },
              "large_business_discount_applied": {
                "type": "boolean",
                "title": "Large Business Discount Applied",
                "description": "Whether the large business discount was applied"
              },
              "effective_percentage": {
                "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/percentage",
                "title": "Effective Percentage",
                "description": "Effective percentage of the reward"
              }
            },
            "additionalProperties": false
          }
        },
        "distribution_notes": {
          "type": "object",
          "properties": {
            "large_business_discount_applied": {
              "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
              "description": "Description of the large business discount applied",
              "example": "50% reduction applied to participants with >$4M annual revenue"
            },
            "redirected_rewards": {
              "$ref": "../../definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
              "description": "Description of the redirected rewards",
              "example": "Discounted rewards from large businesses redirected to accredited NGOs"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
