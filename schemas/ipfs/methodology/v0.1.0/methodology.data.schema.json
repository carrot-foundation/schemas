{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/schemas/ipfs/methodology/v0.1.0/methodology.data.schema.json",
  "title": "Methodology Data",
  "type": "object",
  "required": [
    "name",
    "short_name",
    "slug",
    "version",
    "description",
    "revision_date",
    "publication_date",
    "methodology_pdf",
    "mass_id_audit_rules"
  ],
  "properties": {
    "name": {
      "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/name",
      "title": "Methodology Name",
      "description": "Full official name of the methodology.",
      "example": "BOLD Carbon (CH₄)"
    },
    "short_name": {
      "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
      "maxLength": 50,
      "title": "Methodology Short Name",
      "description": "Abbreviated name for UI display and references.",
      "example": "BOLD Carbon"
    },
    "slug": {
      "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/slug",
      "title": "Methodology Slug"
    },
    "version": {
      "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/semantic_version",
      "title": "Methodology Version"
    },
    "description": {
      "type": "string",
      "minLength": 50,
      "maxLength": 2000,
      "description": "Comprehensive methodology description including purpose, scope, and implementation approach.",
      "example": "Certifies methane emissions prevented through organic waste composting using UNFCCC AMS-III.F methodology. Tracks complete chain of custody from waste generation through professional composting to quantify CO₂e emissions reductions."
    },
    "revision_date": {
      "$ref": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/schemas/ipfs/shared/definitions/v0.1.0/definitions.schema.json#/$defs/iso_date",
      "description": "ISO 8601 date of the last revision to this methodology."
    },
    "publication_date": {
      "$ref": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/schemas/ipfs/shared/definitions/v0.1.0/definitions.schema.json#/$defs/iso_date",
      "description": "ISO 8601 date of the original publication of this methodology."
    },
    "methodology_pdf": {
      "$ref": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/schemas/ipfs/shared/definitions/v0.1.0/definitions.schema.json#/$defs/ipfs_uri",
      "description": "IPFS URI pointing to the complete methodology PDF document."
    },
    "mass_id_audit_rules": {
      "type": "array",
      "minItems": 1,
      "title": "MassID Audit Rules",
      "description": "Array of audit rules that must be executed to check MassID compliance with the methodology.",
      "items": {
        "type": "object",
        "required": [
          "rule_id",
          "rule_slug",
          "rule_name",
          "description",
          "source_code_url",
          "mandatory",
          "execution_order"
        ],
        "properties": {
          "rule_id": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/uuid",
            "title": "Rule ID"
          },
          "rule_slug": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/slug",
            "title": "Rule Slug"
          },
          "rule_name": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
            "maxLength": 100,
            "title": "Rule Name",
            "description": "Human-readable name of the rule.",
            "example": "Waste Mass is Unique"
          },
          "description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 500,
            "title": "Rule Description",
            "description": "Detailed description of what the rule validates and why it's necessary.",
            "example": "Validates that each MassID is unique within the system to prevent duplicate entries"
          },
          "source_code_url": {
            "type": "string",
            "format": "uri",
            "pattern": "^https://github\\.com/.*$",
            "title": "Rule Source Code URL",
            "description": "GitHub URL pointing to the implementation source code for this rule.",
            "example": "https://github.com/carrot-foundation/methodologies/blob/main/bold-carbon/rules/waste-mass-unique.js"
          },
          "mandatory": {
            "type": "boolean",
            "description": "Whether this rule is mandatory for methodology compliance.",
            "example": true
          },
          "execution_order": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/positive_integer",
            "title": "Rule Execution Order"
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
