{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Credit IPFS Record",
  "description": "Credit token metadata stored in IPFS, extending the base schema with ERC20-specific details",
  "$id": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/tags/0.1.40/schemas/ipfs/credit/credit.schema.json",
  "version": "0.1.40",
  "type": "object",
  "properties": {
    "$schema": {
      "title": "JSON Schema URI",
      "description": "URI of the JSON Schema used to validate this record",
      "example": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/schemas/ipfs/shared/base/base.schema.json",
      "type": "string",
      "format": "uri"
    },
    "schema": {
      "type": "object",
      "properties": {
        "hash": {
          "title": "Schema Hash",
          "description": "Keccak256 hash of the JSON Schema this record was validated against",
          "examples": [
            "ac08c3cf2e175e55961d6affdb38bc24591b84ceef7f3707c69ae3d52c148b2f",
            "0xac08c3cf2e175e55961d6affdb38bc24591b84ceef7f3707c69ae3d52c148b2f"
          ],
          "anyOf": [
            {
              "title": "Keccak256 Hash",
              "description": "Keccak256 cryptographic hash as hexadecimal string",
              "examples": [
                "ac08c3cf2e175e55961d6affdb38bc24591b84ceef7f3707c69ae3d52c148b2f",
                "b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2"
              ],
              "type": "string",
              "pattern": "^[0-9a-fA-F]{64}$"
            },
            {
              "type": "string",
              "pattern": "^0x[a-fA-F0-9]{64}$"
            }
          ]
        },
        "type": {
          "title": "Credit Schema Type",
          "description": "Credit schema type",
          "type": "string",
          "const": "Credit"
        },
        "version": {
          "title": "Schema Version",
          "description": "Version of the schema, using semantic versioning",
          "examples": [
            "0.1.0",
            "1.0.0",
            "2.1.3"
          ],
          "type": "string",
          "minLength": 1,
          "pattern": "^v?\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.-]+)?(\\+[a-zA-Z0-9.-]+)?$"
        }
      },
      "required": [
        "hash",
        "type",
        "version"
      ],
      "additionalProperties": false
    },
    "created_at": {
      "title": "Created At",
      "description": "ISO 8601 creation timestamp for this record",
      "examples": [
        "2024-12-05T11:02:47.000Z",
        "2025-02-22T10:35:12.000Z"
      ],
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{1,3})?(?:Z|[+-]\\d{2}:\\d{2})$"
    },
    "external_id": {
      "title": "External ID",
      "description": "Off-chain reference ID (UUID from Carrot backend)",
      "examples": [
        "ad44dd3f-f176-4b98-bf78-5ee6e77d0530",
        "b2c4e6f8-a1b3-4c5d-9e8f-123456789abc"
      ],
      "type": "string",
      "format": "uuid",
      "pattern": "^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$"
    },
    "external_url": {
      "title": "External URL",
      "description": "External URL of the content",
      "examples": [
        "https://explore.carrot.eco/document/ad44dd3f-f176-4b98-bf78-5ee6e77d0530",
        "https://carrot.eco/whitepaper.pdf"
      ],
      "type": "string",
      "format": "uri"
    },
    "original_content_hash": {
      "title": "Original Content Hash",
      "description": "SHA-256 hash of the original JSON content including private data before schema validation",
      "examples": [
        "87f633634cc4b02f628685651f0a29b7bfa22a0bd841f725c6772dd00a58d489",
        "6e83b8e6373847bbdc056549bedda38dc88854ce41ba4fca11e0fc6ce3e07ef6"
      ],
      "type": "string",
      "pattern": "^[0-9a-fA-F]{64}$"
    },
    "content_hash": {
      "title": "Content Hash",
      "description": "SHA-256 hash of RFC 8785 canonicalized JSON after schema validation",
      "examples": [
        "87f633634cc4b02f628685651f0a29b7bfa22a0bd841f725c6772dd00a58d489",
        "6e83b8e6373847bbdc056549bedda38dc88854ce41ba4fca11e0fc6ce3e07ef6"
      ],
      "type": "string",
      "pattern": "^[0-9a-fA-F]{64}$"
    },
    "environment": {
      "title": "Environment",
      "description": "Environment information",
      "type": "object",
      "properties": {
        "blockchain_network": {
          "title": "Blockchain Network",
          "description": "Blockchain Network Environment",
          "type": "string",
          "enum": [
            "mainnet",
            "testnet"
          ]
        },
        "deployment": {
          "title": "Deployment Environment",
          "description": "System environment where this record was generated",
          "type": "string",
          "enum": [
            "production",
            "development",
            "testing"
          ]
        },
        "data_set_name": {
          "title": "Data Set Name",
          "description": "Name of the data set for this record",
          "type": "string",
          "enum": [
            "TEST",
            "PROD"
          ]
        }
      },
      "required": [
        "blockchain_network",
        "deployment",
        "data_set_name"
      ],
      "additionalProperties": false
    },
    "data": {
      "title": "Custom Data",
      "description": "Custom data block that includes the record's data",
      "type": "object",
      "propertyNames": {
        "type": "string"
      },
      "additionalProperties": {}
    },
    "symbol": {
      "title": "Token Symbol",
      "description": "Symbol representing a token or cryptocurrency",
      "examples": [
        "MASS",
        "REC",
        "GAS"
      ],
      "type": "string",
      "minLength": 1,
      "maxLength": 10,
      "pattern": "^[A-Z0-9-]+$"
    },
    "slug": {
      "title": "Token Slug",
      "description": "URL-friendly identifier for the token",
      "examples": [
        "carbon"
      ],
      "type": "string",
      "minLength": 1,
      "maxLength": 100,
      "pattern": "^[a-z0-9-]+$"
    },
    "name": {
      "title": "Token Name",
      "description": "Full human-readable name of the ERC20 token",
      "examples": [
        "Carrot Carbon"
      ],
      "type": "string",
      "minLength": 1
    },
    "decimals": {
      "title": "Token Decimals",
      "description": "Number of decimal places for the ERC20 token",
      "examples": [
        18
      ],
      "type": "integer",
      "minimum": 0,
      "maximum": 18
    },
    "image": {
      "title": "Token Image",
      "description": "IPFS URI pointing to the token's visual representation image",
      "examples": [
        "ipfs://QmTokenImageHash/credit-icon.png"
      ],
      "type": "string",
      "minLength": 1,
      "pattern": "^ipfs:\\/\\/[a-zA-Z0-9]+(\\/.*)?$"
    },
    "description": {
      "title": "Token Description",
      "description": "Comprehensive description of the credit token, its purpose, and impact",
      "examples": [
        "Carrot Carbon (C-CARB) represents verified carbon emissions reductions from organic waste composting projects. Each token equals one metric ton of CO2 equivalent prevented from entering the atmosphere through sustainable waste management practices."
      ],
      "type": "string",
      "minLength": 50,
      "maxLength": 1000
    }
  },
  "required": [
    "$schema",
    "schema",
    "created_at",
    "external_id",
    "external_url",
    "original_content_hash",
    "content_hash",
    "symbol",
    "name",
    "decimals",
    "image",
    "description"
  ],
  "additionalProperties": false
}