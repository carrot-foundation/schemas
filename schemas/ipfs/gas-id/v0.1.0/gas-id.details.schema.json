{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/schemas/ipfs/gas-id/v0.1.0/gas-id.details.schema.json",
  "title": "GasID Data",
  "type": "object",
  "required": [
    "methodology",
    "audit",
    "mass_id",
    "waste_classification",
    "origin_location",
    "prevented_emissions",
    "accredited_participants"
  ],
  "properties": {
    "methodology": {
      "$ref": "../../shared/references/methodology-reference/v0.1.0/methodology-reference.schema.json"
    },
    "audit": {
      "$ref": "../../shared/references/audit-reference/v0.1.0/audit-reference.schema.json"
    },
    "mass_id": {
      "$ref": "../../shared/references/mass-id-reference/v0.1.0/mass-id-reference.schema.json"
    },
    "waste_classification": {
      "type": "object",
      "required": ["primary_type", "subtype", "net_weight_kg"],
      "title": "Waste Classification",
      "description": "Classification of the source waste (MassID)",
      "properties": {
        "primary_type": {
          "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/waste_type",
          "title": "Source Waste Primary Type",
          "description": "Primary type of the source waste"
        },
        "subtype": {
          "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/waste_subtype",
          "title": "Source Waste Subtype",
          "description": "Subtype of the source waste"
        },
        "net_weight_kg": {
          "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/weight_kg",
          "title": "Source Waste Net Weight",
          "description": "Net weight of the source waste"
        }
      }
    },
    "origin_location": {
      "$ref": "../../shared/entities/location/v0.1.0/location.schema.json",
      "title": "Source Waste Origin Location",
      "description": "Location of the waste origin"
    },
    "prevented_emissions": {
      "type": "object",
      "required": ["gas_type", "co2e_kg", "calculation"],
      "title": "Prevented Emissions",
      "description": "Prevented emissions from the source waste",
      "properties": {
        "gas_type": {
          "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
          "title": "Gas Type",
          "description": "Type of gas prevented"
        },
        "co2e_kg": {
          "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/weight_kg",
          "title": "Prevented Emissions (CO₂e kg)",
          "description": "CO₂e weight of the prevented emissions"
        },
        "calculation": {
          "type": "object",
          "required": ["formula", "method", "date", "values"],
          "properties": {
            "formula": {
              "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
              "title": "Calculation Formula",
              "description": "Formula used to calculate the prevented emissions",
              "maxLength": 100
            },
            "method": {
              "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
              "title": "Calculation Method",
              "description": "Method used to calculate the prevented emissions",
              "maxLength": 100
            },
            "date": {
              "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/iso_date",
              "title": "Calculation Date",
              "description": "Date when the calculation was performed"
            },
            "values": {
              "type": "array",
              "title": "Calculation Values",
              "description": "Values used to calculate the prevented emissions",
              "items": {
                "type": "object",
                "required": ["reference", "value", "label"],
                "properties": {
                  "reference": {
                    "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
                    "maxLength": 3
                  },
                  "value": {
                    "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_negative_float"
                  },
                  "label": {
                    "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
                    "maxLength": 100
                  }
                }
              }
            }
          }
        }
      }
    },
    "accredited_participants": {
      "type": "array",
      "minItems": 1,
      "title": "Accredited Participants",
      "items": {
        "type": "object",
        "required": [
          "participant_id",
          "name",
          "role",
          "external_url",
          "accreditation_id"
        ],
        "properties": {
          "participant_id": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/uuid",
            "title": "Participant ID"
          },
          "name": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/participant_name"
          },
          "role": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/participant_role"
          },
          "accreditation_id": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/uuid",
            "title": "Accreditation ID"
          },
          "external_url": {
            "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/external_url",
            "title": "Participant Accreditation External URL"
          }
        }
      }
    },
    "participant_rewards": {
      "type": "object",
      "required": ["distribution_basis", "reward_allocations"],
      "title": "Participant Rewards",
      "description": "Rewards distribution to participants",
      "properties": {
        "distribution_basis": {
          "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
          "maxLength": 200,
          "title": "Distribution Basis",
          "description": "Basis for the rewards distribution"
        },
        "reward_allocations": {
          "type": "array",
          "minItems": 1,
          "title": "Reward Allocations",
          "description": "Rewards percentage allocated to each participant",
          "items": {
            "type": "object",
            "required": [
              "participant_id",
              "participant_name",
              "role",
              "reward_percentage",
              "effective_percentage"
            ],
            "properties": {
              "participant_id": {
                "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/uuid",
                "title": "Participant ID"
              },
              "participant_name": {
                "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/participant_name"
              },
              "role": {
                "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/participant_role"
              },
              "reward_percentage": {
                "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/percentage",
                "title": "Reward Percentage",
                "description": "Reward percentage allocated to the participant"
              },
              "large_business_discount_applied": {
                "type": "boolean",
                "title": "Large Business Discount Applied",
                "description": "Whether the large business discount was applied"
              },
              "effective_percentage": {
                "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/percentage",
                "title": "Effective Percentage",
                "description": "Effective percentage of the reward"
              }
            }
          }
        },
        "distribution_notes": {
          "type": "object",
          "properties": {
            "large_business_discount_applied": {
              "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
              "description": "Description of the large business discount applied",
              "example": "50% reduction applied to participants with >$4M annual revenue"
            },
            "redirected_rewards": {
              "$ref": "../../shared/definitions/v0.1.0/definitions.schema.json#/$defs/non_empty_string",
              "description": "Description of the redirected rewards",
              "example": "Discounted rewards from large businesses redirected to accredited NGOs"
            }
          }
        }
      }
    }
  },
  "additionalProperties": false
}
