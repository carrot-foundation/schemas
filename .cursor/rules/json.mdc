---
description: 
globs: *.json
alwaysApply: false
---

# Cursor Rules for JSON Files

## Formatting Standards

- Use 2-space indentation consistently
- No trailing commas in JSON files
- Use double quotes for all strings
- Maintain consistent line breaks between top-level properties
- Keep arrays and objects properly formatted with appropriate spacing

## Property Naming Conventions

- Use snake_case for property names (following project convention)
- Use descriptive, meaningful property names
- Avoid abbreviations unless they're well-established (e.g., "id", "url")
- Use consistent naming patterns across related schemas

## Structure Organization

- Order properties logically:
  1. Schema metadata (`$schema`, `$id`, `title`, `description`)
  2. Schema version information (`schema` object with `hash`, `type`, `version`)
  3. Temporal metadata (`created_at`)
  4. Core identification fields (`external_id`, `external_url`)
  5. Content integrity fields (`content_hash`, `original_content_hash`)
  6. Creator and relationship data
  7. Environment information
  8. Primary data payload (`data` object)
  9. Blockchain information (if applicable)
  10. Display metadata (`name`, `short_name`, `description`, `image`)
  11. Attributes and external links
- Keep nesting levels reasonable (max 4-5 levels deep)
- Group related properties together

## Value Formatting

- Use proper data types (string, number, boolean, array, object)
- Follow consistent formatting patterns across all JSON files
- Maintain data type consistency with schema definitions

## Data Type Conventions

### Identifiers

- **UUIDs**: Use lowercase hexadecimal with hyphens (RFC 4122 format)
  - Format: `"8f2c3445-ef89-4de7-8d95-7c814d5c8af9"`
  - Use for: `external_id`, `creator.id`, `event_id`
- **Ethereum addresses**: Use lowercase hexadecimal with `0x` prefix
  - Format: `"0x1234567890abcdef1234567890abcdef12345678"`
  - Length: 42 characters (0x + 40 hex digits)
  - Use for: `smart_contract_address`, wallet addresses
- **Token IDs**: Use numeric strings to support uint256
  - Format: `"123"` (not `123`)
  - Reason: JavaScript cannot safely handle uint256 numbers
  - Use for: `token_id` in blockchain objects
- **Hash values**: Use lowercase hexadecimal (no `0x` prefix for SHA-256)
  - SHA-256: `"87f633634cc4b02f628685651f0a29b7bfa22a0bd841f725c6772dd00a58d489"` (64 chars)
  - Keccak256: `"0x9c22ff5f21f0b81b113e63f7db6da94fedef11b2119b4088b89664fb9a3cb658"` (with 0x prefix)
  - Use for: `content_hash`, `id_hash`, `location_id_hash`, `participant_id_hash`

### Temporal Data

- **ISO 8601 timestamps**: Use for human-readable, top-level timestamps
  - Format: `"2024-12-05T14:30:00.000Z"`
  - Always include timezone (Z for UTC)
  - Include milliseconds for precision
  - Use for: `created_at`
- **Unix timestamps**: Use for attributes, events, and on-chain data
  - Format: `1710518400000` (integer, not string)
  - Unit: Milliseconds since Unix epoch
  - Range: Positive integers up to 9007199254740991
  - Use for: `timestamp`, `issue_timestamp`, `first_reported_timestamp`, `last_reported_timestamp`
- **ISO 8601 dates**: Use for date-only values (no time component)
  - Format: `"2024-02-10"`
  - Pattern: YYYY-MM-DD
  - Use in attributes when time is not relevant

For a higher-level overview of timestamp and date conventions across the project, see `CLAUDE.md` (Schema Development â†’ Timestamp and Date Formats).

### URIs and URLs

- **IPFS URIs**: Use standard IPFS URI scheme
  - Format: `"ipfs://{CID}"` or `"ipfs://{CID}/path/to/file"`
  - Examples:
    - `"ipfs://QmTy8w65yBXgyfG2ZBg5TrfB2hPjrDQH3RCQFJGkARStJb"`
    - `"ipfs://bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi"`
    - `"ipfs://QmHashExample/metadata.json"`
  - Use for: `image`, `animation_url`, `target_uri`
- **HTTP(S) URLs**: Use fully qualified URLs with protocol
  - Format: `"https://example.com/path"`
  - Always include protocol (https:// or http://)
  - Use for: `external_url`, external links
- **Schema references**: Use GitHub raw URLs with appropriate ref
  - Development: `"https://raw.githubusercontent.com/carrot-foundation/schemas/refs/heads/main/..."`
  - Production: `"https://raw.githubusercontent.com/carrot-foundation/schemas/refs/tags/0.1.27/..."`

### Numeric Values

- **Weights**: Always in kilograms as numbers (not strings)
  - Format: `1500.5` or `3000`
  - Type: number (float or integer)
  - Use for: `net_weight`, `weight`, weight attributes
- **Coordinates**: Decimal degrees as numbers
  - Latitude: -90 to 90 (e.g., `-23.39`)
  - Longitude: -180 to 180 (e.g., `-51.13`)
  - Precision: Typically 2-3 decimal places (0.001 multipleOf)
- **Percentages**: Use 0-100 range as numbers
  - Format: `25.5` (not `0.255` or `"25.5%"`)
  - Type: number
- **Chain IDs**: Use integers
  - Format: `137` (Polygon), `1` (Ethereum), `11155111` (Sepolia)
  - Type: integer
- **Durations**: Use appropriate units consistently
  - Minutes: `4350` (integer) for `total_duration_minutes`
  - Hours: `72.5` (float with 0.1 precision) for processing time attributes

### Colors and Display

- **Hex colors**: Use uppercase hexadecimal with `#` prefix
  - Format: `"#2D5A27"` (not `"#2d5a27"` or `"2D5A27"`)
  - Length: 7 characters (# + 6 hex digits)
  - Use for: `background_color`

### Strings and Text

- **Empty strings**: Avoid empty strings; use null or omit the field
- **Enum values**: Use consistent casing (typically PascalCase or lowercase)
  - Examples: `"mainnet"`, `"testnet"`, `"Collection Point"`, `"Organic"`
- **Slugs**: Use lowercase with hyphens
  - Format: `"bold-carbon-ch4"`
  - Pattern: `^[a-z0-9-]+$`
- **Symbols**: Use uppercase for token symbols
  - Format: `"C-CARB"`
  - Pattern: `^[A-Z0-9-]+$`

### Arrays and Collections

- Use consistent singular item naming in descriptions
- Order arrays logically:
  - Chronological order for events (oldest to newest)
  - Hierarchical order for nested structures
  - Fixed order for attributes (as defined in schema)
- Always include at least one item when array is required
- Example files should demonstrate realistic array lengths

## Schema References ($ref)

### When to Use $ref

- Reference shared type definitions from `schemas/ipfs/shared/definitions/definitions.schema.json`
- Use for common patterns that appear across multiple schemas
- Promotes consistency and reduces duplication
- Makes maintenance easier (update once, apply everywhere)

### Common $ref Patterns

- **UUIDs**: `{"$ref": "../shared/definitions/definitions.schema.json#/$defs/uuid"}`
- **Ethereum addresses**: `{"$ref": "../shared/definitions/definitions.schema.json#/$defs/ethereum_address"}`
- **Timestamps**: `{"$ref": "../shared/definitions/definitions.schema.json#/$defs/iso_timestamp"}`
- **Weights**: `{"$ref": "../shared/definitions/definitions.schema.json#/$defs/weight_kg"}`
- **Country codes**: `{"$ref": "../shared/definitions/definitions.schema.json#/$defs/iso_country_code"}`
- **Non-empty strings**: `{"$ref": "../shared/definitions/definitions.schema.json#/$defs/non_empty_string"}`
- **IPFS URIs**: `{"$ref": "../shared/definitions/definitions.schema.json#/$defs/ipfs_uri"}`

### Local $ref Usage

- Use `#/$defs/local_definition` for schema-local definitions
- Define reusable components in `$defs` at the schema root
- Reference them throughout the schema for consistency

## Example File Best Practices

- Use realistic, production-like data values
- Include all required fields
- Demonstrate optional fields when they add clarity
- Use consistent fake data patterns (e.g., consistent UUIDs format)
- Ensure examples validate against their schemas
- Show practical use cases, not just minimal valid JSON
